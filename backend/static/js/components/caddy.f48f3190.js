import{i as e,F as t,o as a,G as i,H as n,d as o,r as l,c as s,w as d,b as r,I as u,p,e as g,f as h,m as f,n as c,B as m,L as y}from"../.pnpm/.pnpm.5b5f2924.js";import{_}from"../header/header.c523459b.js";import{r as x}from"../index/index.e6665d97.js";import{_ as w}from"../_plugin-vue_export-helper/_plugin-vue_export-helper.1b428a4d.js";const b=w(o({mounted:async function(){e.get("/api/get_caddyfile").then((e=>{this.code=e.data}))},methods:{async upload_caddyfile(){const t={token:r.get("token"),text:u(this.$refs.html.monacoEditor).getValue()};await e.post("/api/uploadtext",t)}},setup(){0==r.isKey("token")?x.push("/login"):1==r.isKey("token")&&e.get(`/api/get_auth?user=${r.get("username")}&password=${r.get("token")}`).then((e=>{"false"==e.data&&x.push("/login")}))},components:{MonacoEdito:w({props:{width:{type:String,default:"100%"},height:{type:String,default:"70%"},language:{type:String,default:"javascript"}},data:()=>({monacoEditor:null,value:""}),mounted(){this.init()},methods:{async init(){let a=await e.get("/api/get_caddyfile");this.value=a.data,this.monacoEditor=t.create(this.$refs.main,{theme:"vs-dark",value:this.value,language:this.language,folding:!0,foldingHighlight:!0,foldingStrategy:"indentation",showFoldingControls:"always",disableLayerHinting:!0,emptySelectionClipboard:!1,selectionClipboard:!1,automaticLayout:!0,codeLens:!1,scrollBeyondLastLine:!1,colorDecorators:!0,accessibilitySupport:"off",lineNumbers:"on",lineNumbersMinChars:5,enableSplitViewResizing:!1,readOnly:!1,wordWrap:"on"})}}},[["render",function(e,t,o,l,s,d){return a(),i("div",{ref:"main",style:n({width:o.width,height:o.height,height:o.height})},null,4)}]])}}),[["render",function(e,t,i,n,o,r){const u=_,x=f,w=c,b=l("MonacoEdito"),k=m,v=y,C=p;return a(),s(C,null,{default:d((()=>[g(u),g(C,null,{default:d((()=>[g(C,{style:{padding:"0 24px 24px"}},{default:d((()=>[g(w,{style:{margin:"16px 0"}},{default:d((()=>[g(x,null,{default:d((()=>[h("主页")])),_:1}),g(x,null,{default:d((()=>[h("Caddy程序")])),_:1})])),_:1}),g(v,{style:{background:"#fff",padding:"24px",margin:0,minHeight:"280px"}},{default:d((()=>[g(b,{ref:"html"},null,512),g(k,{type:"primary",onClick:e.upload_caddyfile},{default:d((()=>[h("保存")])),_:1},8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})}]]);export{b as default};
